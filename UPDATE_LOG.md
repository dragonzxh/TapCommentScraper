# 更新日志

## 2024-03-21 项目重构与优化

### 主要变更
1. **项目结构优化**：
   - 创建 `src` 目录，统一管理Python源代码
   - 重构文件组织，提高代码可维护性
   - 优化启动脚本，支持Edge浏览器

2. **启动脚本更新**：
   - 更新Windows启动脚本，支持Edge浏览器
   - 更新macOS启动脚本，优化用户体验
   - 新增PowerShell启动脚本

3. **文档更新**：
   - 更新README.md，反映新的项目结构
   - 更新使用说明，适配Edge浏览器
   - 更新更新日志，记录最新变更

### 技术改进
1. **代码优化**：
   - 改进错误处理机制
   - 优化日志记录
   - 提高代码可读性

2. **性能优化**：
   - 优化浏览器驱动管理
   - 改进内存使用
   - 提高爬取效率

## 2024-03-20 基础功能更新

### 新增功能
1. **Edge浏览器支持**：
   - 添加Microsoft Edge浏览器支持
   - 优化浏览器驱动管理
   - 改进页面加载性能

2. **用户体验改进**：
   - 优化Web界面交互
   - 添加更多提示信息
   - 改进错误提示

### 修复问题
1. **Windows兼容性**：
   - 修复中文编码问题
   - 优化文件路径处理
   - 改进启动脚本兼容性

2. **稳定性改进**：
   - 修复文件保存问题
   - 优化错误处理
   - 提高程序稳定性

## 2023-04-23 用户体验改进与Windows中文兼容性修复

### 新增功能：
1. **简化ID输入**：
   - 用户现在只需输入游戏/视频ID，无需记忆复杂URL
   - 自动生成完整URL并实时显示
   - 支持Steam AppID、TapTap游戏ID和Bilibili BV号

2. **Windows兼容性增强**：
   - 修复Windows环境下中文显示乱码问题
   - 添加编码自动检测与修复功能
   - 提供专用启动脚本解决"could not reach host"问题

### 主要改进：
1. **用户界面优化**：
   - 添加前缀标签，使输入字段更直观
   - 提供实时URL预览，增强用户信心
   - 添加详细说明文字，提升易用性

2. **后端逻辑增强**：
   - 改进URL处理逻辑，支持简化ID输入
   - 增加URL验证和格式化功能
   - 修复Flask应用的host设置，解决连接问题

3. **错误处理优化**：
   - 添加更多输入验证，避免无效请求
   - 提供友好的错误信息，指导用户操作
   - 改进轮询机制，提高状态更新稳定性

### 新增文件：
1. `windows_quick_fix.bat` - 解决Windows连接问题的快速修复工具
2. 其他Windows中文乱码修复工具和指南（之前版本）

## 2023-04-22 Web应用启动脚本增强与Windows中文乱码修复

### 新增文件：
1. **启动脚本**:
   - `启动评论爬虫.command` - macOS用户的一键启动脚本
   - `启动评论爬虫.bat` - Windows用户的一键启动脚本
   - `启动评论爬虫_中文环境.bat` - Windows中文环境专用启动脚本
   - `web_launcher.sh` - macOS通用启动脚本
   - `web_launcher_windows.bat` - Windows通用启动脚本
   - `start_web.sh` - 简化版启动脚本

2. **文档**:
   - `WEB启动说明.md` - 详细的Web应用启动指南，包含macOS和Windows平台
   - `Windows中文乱码修复指南.md` - Windows中文乱码问题解决方案

3. **修复工具**:
   - `windows_encoding_fix.py` - Windows中文编码自动修复工具
   - `修复Windows中文乱码.bat` - Windows中文乱码修复启动脚本

### 主要变更：
1. **跨平台支持**:
   - 为macOS和Windows用户提供了专门的启动脚本
   - 支持双击启动，无需命令行知识
   - 自动切换到正确的项目目录

2. **用户体验改进**:
   - 添加了用户友好的提示信息
   - 增加了错误检查和提示
   - 为Windows用户解决了中文显示问题

3. **启动方式多样化**:
   - 支持图形界面双击启动
   - 支持命令行手动启动
   - 支持通过菜单选择功能

4. **Windows中文乱码修复**:
   - 自动检测系统语言环境
   - 在中文环境下自动应用编码修复
   - 提供专用的中文环境启动脚本
   - 添加自动修复工具和详细修复指南

### 技术细节：
1. **脚本功能**:
   - 自动检测和切换工作目录
   - 自动激活Python虚拟环境
   - 验证必要文件和环境是否存在
   - 提供清晰的错误提示
   - Windows脚本特别处理了中文编码问题

2. **兼容性考虑**:
   - 兼容不同版本的操作系统
   - 不依赖于固定的安装路径
   - 使用相对路径增强可移植性

3. **编码处理**:
   - 设置PYTHONIOENCODING环境变量
   - 使用Python的-u参数运行脚本
   - 在Python脚本中设置stdout/stderr编码
   - 将CSV文件编码改为utf-8-sig，以支持Excel正常显示中文

### 未来计划：
1. 添加更多平台支持（如Linux）
2. 增加自动安装依赖的功能
3. 改进错误处理和日志记录 